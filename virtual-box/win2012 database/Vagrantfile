
API_VERSION = "2"
HOST_IP = "192.168.33.11"
HOSTNAME = "windb1"
BOX = "chrism/win2012-r2-x64"

Vagrant.configure(API_VERSION) do |config|
    config.vm.guest = :windows
    config.vm.communicator = "winrm"
    config.vm.boot_timeout = 600
    config.vm.graceful_halt_timeout = 600
    config.vm.network :forwarded_port, guest: 3389, host: 33389
    config.vm.network :forwarded_port, guest: 5985, host: 55985, id: "winrm", 
    auto_correct: true

    config.vm.define "guest" do |guest|
        guest.vm.box = BOX
        guest.vm.hostname = HOSTNAME
        guest.vm.network :private_network, ip: HOST_IP
        guest.vm.provider "virtualbox" do |virtualbox|
            virtualbox.name = HOSTNAME
            virtualbox.memory = "2048"
            virtualbox.cpus = "2"
        end    
    end 
        
    config.vm.provision "ansible" do |ansible|
       ansible.verbose = "v"
       ansible.playbook = "provisioning/playbook.yml"

    end
end